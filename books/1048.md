# 简介

​            活动图，用于UML中建立动态模型，主要描述系统随时间变化的行为，这些行为是用从静态视图中抽取的系统的瞬间值的变化来描述的。在对象的生命期建模中，活动图是一种特殊形式的状态机，用于对计算机流程和工作流程建模。活动图从本质上说是一个流程图，展现跨过不同的对象从活动到活动的控制流。与传统的流程图不同的是，活动图能够展示并发和控制分支。



在用例模型中，可以利用文本来描述用例的业务流程，但如果业务流程较为复杂的话，则可能会难以阅读和理解，这时需要用更加容易理解的方式（图形）来描述业务过程的工作流，在UML中将这类描述活动流程的图形称为活动图（Activity Diagram）。 

活动图被设计用于简化描述一个过程或者操作的工作步骤。活动用圆角矩形表示，接近椭圆。一个活动中的处理一旦完成，则自动引起下一个活动的发生。箭头表示从一个活动转移到下一个活动。和状态图类似，活动图中的起点用一个实心圆表示，终点用一个实心圆外加一个圆圈表示。在一个活动图中，只有一个起始状态，可以有零个或多个终止状态。

```
活动图表示在处理某个活动时，两个或者更多类对象之间的过程控制流。它用来描述采取何种动作、做什么（对象状态改变）、何时发生（动作序列）以及何处发生（泳道）。活动图可用于在业务单元的级别上对更高级别的业务过程进行建模，或者对低级别的内部类操作进行建模。活动图可以用作以下目的：
⑴描述一个操作执行过程中所完成的工作（动作），这是活动图最常见的用途。
⑵描述对象内部的工作。
⑶显示如何执行一组相关的动作，以及这些动作如何影响它们周围的对象。
⑷显示用例的实例如何执行动作以及如何改变对象状态。
⑸说明一次业务流程中的人（参与者）和对象是如何工作的。

```

活动图说明了起点、终点、两个活动和转移的表示法。 

![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191123231421.png)



## 活动图的基本元素



```
活动图的符号集与状态图中使用的符号集类似。像状态图一样，活动图也从一个连接到初始活动的实心圆开始。活动是通过一个圆角矩形（活动的名称包含在其内）来表示的。活动可以通过转换线段连接到其他活动，或者连接到判断点，这些判断点连接到由判断点的条件所保护的不同活动。结束过程的活动连接到一个终止点（就像在状态图中一样）。活动图中的基本要素包括状态、转移、分支、分叉和汇合、泳道、对象流等。

```



动作状态

```
对象的动作状态是活动图中最小单位的构造块，表示原子动作。动作状态有三个特性：
⑴原子性：即不能被分解成更小的部分；
⑵不可中断性：即一旦开始就必须运行到结束；
⑶瞬时性：即动作状态所占用的处理时间通常是极短的，甚至是可以被忽略的动作状态使用带圆端的方框表示。如图7.13符号所示。 
动作状态如图示

```

![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191123231500.png)

活动状态

```
动作状态表示的是不可分割的原子动作，而活动状态则不同，它表示的是可以分割的动作。特点是：它可以被分解成其他子活动或动作状态，它能够被中断，占有有限的时间。活动状态可以理解为一个组合，它的控制流由其他活动状态或动作状态组成。
在UML中，动作状态和活动状态的图标没有什么区别，都是圆端的方框。只是活动状态可以有附加的部分，如可以指定入口动作、出口动作、动作状态以及内嵌状态机。

```



转移

```
转移也称转换是两个状态间的一种关系，表示对象将在当前状态中执行动作，并在某个特定事件发生或某个特定的条件满足时进入后继状态。在UML中用一条简单的带箭头的直线表示一个转移。箭头上可以带有监护条件表达式。

```

![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191123231531.png)



分支

```
分支用于描述基于某个条件的可选择路径。一个分支可以有一个进入转移和两个或多个输出转移。在每条输出转移上都有监护条件表达式保护，当且仅当监护条件表达式为真时，该输出路径才有效。在所有输出转移中，其监护条件不能重叠，而且它们应该覆盖所有的可能性。UML活动图中的分支用菱形表示。

```





分叉和汇合

```
对象在运行时可能会存在两个或多个并发运行的控制流，为了对并发的控制流建模，UML中引入了分叉与汇合的概念。分叉用于将动作流分为两个或多个并发运行的分支，而汇合则用于同步这些并发分支，以达到共同完成一项事务的目的。
在UML中使用分叉和汇合表示并行发生的事件流。分叉表示把一个单独的控制流分成两个或多个并发的控制流。一个分叉可以有一个进入转移和两个或多个输出转移，每一个转移表示一个独立的控制流。 汇合表示两个或多个并发控制流的同步发生，一个汇合可以有两个或多个进入转移和一个输出转移。分叉和汇合应该是平衡的。分叉和汇合在图形上都使用同步条来表示，同步条通常用一条粗的水平线表示。 

```



![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191123231625.png)



显示了分叉和汇合的图示



泳道

```
泳道将活动图中的活动划分为若干组，并把每一组指定给负责这组活动的业务组织，即对象。每一组表示一个特定的类、人或部门，他们负责完成组内的活动。在活动图中，泳道区分了负责活动的对象，它明确地表示了哪些活动是由哪些对象进行的。在包含泳道的活动图中，每个活动只能明确地属于一个泳道。泳道用于表示实际执行活动的对象。
泳道是用垂直实线绘出，垂直线分隔的区域就是泳道。在泳道的上方可以给出泳道的名字或对象的名字，该对象负责泳道内的全部活动。泳道没有顺序，不同泳道中的活动既可以顺序进行也可以并发进行，动作流和对象流允许穿越分隔线。

```

![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191123231659.png)



对象流



```
用活动图描述某个对象时，可以把所涉及的对象放置在活动图上，并用一个依赖将这些对象连接到对它们进行创建、撤销和修改的活动转移上。这种包括依赖关系和对象的应用被称为对象流。对象流是动作和对象间的关联。对象流可用于对下列关系建模：动作状态对对象的使用以及动作状态对对象的影响。
对象流中的对象有以下特点：
⑴一个对象可以由多个动作操作。
⑵一个动作输出的对象可以作为另一个动作输入的对象。
⑶在活动图中，同一个对象可以多次出现，它的每一次出现表明该对象正处于对象生存期的不同时间点。
对象流用带有箭头的虚线表示。如果箭头是从动作状态出发指向对象，则表示动作对对象施加了一定的影响。施加的影响包括创建、修改和撤销等。如果箭头从对象指向动作状态，则表示该动作使用对象流所指向的对象。状态图中的对象用矩形表示，矩形内是该对象的名称，名称下的方括号表明对象此时的状态。
下图显示了一个支付账单的对象流。

```



![](https://raw.githubusercontent.com/ZanderZhao/images/master/img2019/20191123231725.png)



## 活动图的建模技术及应用

```
活动图用于对系统的动态行为建模，在对一个系统建模时，通常有两种使用活动图的方式：
⑴为工作流建模
对工作流建模强调与系统进行交互的对象所观察到的活动。工作流一般处于系统的边界，用于可视化、详述、构造和文档化开发系统所涉及的业务流程。用于业务建模的时候，每一条泳道表示一个职责单位，该图能够有效地体现出所有职责单位之间的工作职责，业务范围及之间的交互关系、信息流程。 
⑵为对象的操作建模
在这种情况下活动图本质上就是流程图，它描述系统的活动、判定点和分支等部分。因此，在UML中，可以把活动图作为流程图来使用，用于对系统的操作建模。每一个对象占据一个泳道，而活动则是该对象的成员方法。 
状态图和活动图都是用于对系统的动态行为建模。状态机是展示状态与状态转换的图。通常一个状态机依附于一个类，并且描述这个类实例对接收到的事物的反应。状态机有两种可视化方式，分别是状态图和活动图。如果强调对象的潜在状态和这些状态的间的转换，一般使用状态图；如果强调从活动到活动的控制流，一般使用活动图。活动图被设计用于描述一个过程或操作的工作步骤，从这方面讲，它可以算是状态的一种扩展方式，状态图描述一个对象的状态以及状态的改变，而活动图除了描述对象状态外，更突出了它的活动。

```



```
本章介绍了状态图和活动图的基本概念、UML表示法和建模的技术。在UML建模过程中，状态图是非常必要的，它能帮助系统开发人员理解系统中对象的行为。而类和对象图只能展现系统的静态层次和关联，并不能表达系统的行为。而详细描述了对象行为的状态图，帮助开发人员构造出符合用户需求的系统。通过拨打电话工作、航班机票预订系统和网上银行登录系统来阐述了状态图的绘制过程：确定状态，分析状态间的转换，细化活动与内部转化等过程完成状态，介绍了状态图对对象的生命周期建模以及对反应型对象的行为建模的功能和建模策略。
UML中的活动图主要是个流图，它描述了从活动到活动的控制流，它还可以过来描述对象在控制流的不同点从一个状态转移到另外一个状态的对象流。对活动图的基本内容的讲解，主要包括动作状态、活动状态、转移、分支、分叉和汇合、泳道、对象流。并举例探讨了用活动图为工作流建模和操作建模的策略。

```





















